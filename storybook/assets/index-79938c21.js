import{i as s,j as a}from"./styled-components.browser.esm-aaaef0f3.js";import{a as n,e as c,c as u}from"./index-0c9fedb2.js";import{i as p,c as l}from"./serverUrlConstants-fe72d8a7.js";import{c as m}from"./cartState-7478dda1.js";import{a as d}from"./common-a48b2eb5.js";import{f as C,u as f,s as y}from"./fetchUtils-f1ccc203.js";import{C as g}from"./CouponItem-3b870ea5.js";const v=n({key:"withCartTotalPrice",get:({get:t})=>{const e=t(m);return p(e)}}),_=({coupons:t,totalItemsPrice:e})=>e===0?[]:t.filter(r=>r.minimumPrice<=e),V=({totalItemsPrice:t,coupon:e})=>t===0||t<e.minimumPrice?0:e.type==="percent"?d({total:t,percent:e.value})??0:e.type==="price"?Math.min(e.value,t):e.value,S=t=>t.map(e=>({id:e.id,name:e.name,type:e.type,value:e.value,minimumPrice:e.minimumPrice})),P=async({serverName:t,userInfo:e})=>{const r=await C(l(t),{email:e.email,password:e.password});return S(r)},h=n({key:"getCouponListSelector",get:async({get:t})=>{const e=t(f),r=t(y);return await P({serverName:r,userInfo:e})},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),w=c({key:"couponState",default:h}),x=n({key:"availableCoupon",get:({get:t})=>{const e=t(w),r=t(v);return _({coupons:e,totalItemsPrice:r})}});function o({onCouponSelect:t,selectedCoupon:e}){const r=u(x);return a.jsx(L,{children:r.map(i=>a.jsx(g,{onCouponSelect:()=>t(i),condition:i.minimumPrice,discountValue:i.value,selected:(e==null?void 0:e.id)===i.id,...i},i.id))})}const L=s.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);

  gap: 5rem;
`;try{o.displayName="CouponList",o.__docgenInfo={description:"",displayName:"CouponList",props:{onCouponSelect:{defaultValue:null,description:"",name:"onCouponSelect",required:!0,type:{name:"(coupon: CouponType) => void"}},selectedCoupon:{defaultValue:null,description:"",name:"selectedCoupon",required:!0,type:{name:"CouponType | null"}}}}}catch{}export{o as C,x as a,V as g,v as w};
//# sourceMappingURL=index-79938c21.js.map
